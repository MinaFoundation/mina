on:
  workflow_call:
    inputs:
      changed_paths:
        description: 'Paths where changes took place'
        required: true
        type: string
jobs:
  build-deb-pkg:
    name: "Build debian package"
    runs-on: minafoundation-toolchain-jammy-runners
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4
        with:
          submodules: recursive
      - name: ğŸ§© Get libp2p_helper dependency cache
        uses: actions/cache@v3
        id: libp2p_helper_dependency
        with:
          path: ./src/app/libp2p_helper/result/bin/libp2p_helper
          key: libp2p_helper_dependency-${{ hashFiles('src/app/libp2p_helper/src/go.sum') }}
      - name: ğŸ—ï¸ build libp2p_helper
        if: ${{ steps.libp2p_helper_dependency.outputs.cache-hit != 'true' }}
        run: make -C src/app/libp2p_helper
      - name: list built files
        run: ls -la src/app/libp2p_helper/result/bin/libp2p_helper

